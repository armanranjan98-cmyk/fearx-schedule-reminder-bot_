// Simple daily scrim notifier bot
const { Client, GatewayIntentBits } = require('discord.js');
const cron = require('node-cron');
require('dotenv').config();

const client = new Client({
  intents: [GatewayIntentBits.Guilds, GatewayIntentBits.GuildMessages]
});

// ðŸ‘‡ Your daily scrim schedule
const schedule = {
  "Monday": ["17:45", "âš”ï¸ FearX ESP 6 PM Scrim! Get ready!"],
  "Tuesday": ["20:00", "ðŸŽ¯ 9 PM Scrim â€” Time to shine!"],
  "Wednesday": ["20:00", "ðŸŽ¯ 9 PM Scrim â€” Focus and win!"],
  "Thursday": ["17:45", "ðŸ”¥ 6 PM Scrim â€” Full power!"],
  "Friday": ["21:00", "ðŸ† 9 PM Scrim â€” Letâ€™s dominate!"],
  "Saturday": ["20:30", "ðŸ’ª 8:30 PM Scrim â€” Be ready!"],
  "Sunday": ["18:00", "ðŸŽ® 6 PM Scrim â€” Weekend rush!"]
};

client.once('ready', () => {
  console.log(`âœ… Logged in as ${client.user.tag}`);

  // Schedule message every day
  for (const [day, [time, message]] of Object.entries(schedule)) {
    const [hour, minute] = time.split(':');
    // cron format â†’ minute hour * * weekday(0=Sunday)
    const weekday = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].indexOf(day);
    
    cron.schedule(`${minute} ${hour} * * ${weekday}`, async () => {
      const channel = client.channels.cache.get(process.env.CHANNEL_ID);
      if (channel) {
        await channel.send(message);
        console.log(`ðŸ“¢ Sent message for ${day}`);
      }
    });
  }
});

client.login(process.env.TOKEN);
